# System Architecture Diagram

## Complete Federated Learning + Blockchain Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    FEDERATED LEARNING SYSTEM                             │
│                     WITH BLOCKCHAIN STORAGE                              │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                          GLOBAL SERVER                                   │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │  Global Model (SimpleAudioClassifier)                            │  │
│  │  - Input: 64 dimensions                                          │  │
│  │  - Output: 10 classes (speech commands)                          │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │  Federated Aggregator (FedAvg)                                   │  │
│  │  - Aggregates client models                                      │  │
│  │  - Weighted by number of samples                                 │  │
│  │  - Updates global model                                          │  │
│  └──────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                    ┌───────────────┼───────────────┐
                    │               │               │
                    ▼               ▼               ▼
┌──────────────────────┐ ┌──────────────────────┐ ┌──────────────────────┐
│   CLIENT 1           │ │   CLIENT 2           │ │   CLIENT 3           │
│  ┌────────────────┐  │ │  ┌────────────────┐  │ │  ┌────────────────┐  │
│  │ Local Model    │  │ │  │ Local Model    │  │ │  │ Local Model    │  │
│  │ (Copy of       │  │ │  │ (Copy of       │  │ │  │ (Copy of       │  │
│  │  Global Model) │  │ │  │  Global Model) │  │ │  │  Global Model) │  │
│  └────────────────┘  │ │  └────────────────┘  │ │  └────────────────┘  │
│                      │ │                      │ │                      │
│  ┌────────────────┐  │ │  ┌────────────────┐  │ │  ┌────────────────┐  │
│  │ Local Data     │  │ │  │ Local Data     │  │ │  │ Local Data     │  │
│  │ (Partition 1)  │  │ │  │ (Partition 2)  │  │ │  │ (Partition 3)  │  │
│  └────────────────┘  │ │  └────────────────┘  │ │  └────────────────┘  │
│                      │ │                      │ │                      │
│  ┌────────────────┐  │ │  ┌────────────────┐  │ │  ┌────────────────┐  │
│  │ Miner 1        │  │ │  │ Miner 2        │  │ │  │ Miner 3        │  │
│  │ (PoA Mining)   │  │ │  │ (PoA Mining)   │  │ │  │ (PoA Mining)   │  │
│  └────────────────┘  │ │  └────────────────┘  │ │  └────────────────┘  │
└──────────────────────┘ └──────────────────────┘ └──────────────────────┘
           │                       │                       │
           └───────────────────────┼───────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         BLOCKCHAIN LAYER                                 │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │  EHRChain (Blockchain Manager)                                   │  │
│  │  - Validates blocks                                              │  │
│  │  - Maintains chain integrity                                     │  │
│  │  - Consensus: Proof of Authority (PoA)                           │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │  Block Structure                                                 │  │
│  │  ┌────────────────────────────────────────────────────────────┐ │  │
│  │  │ Block Header                                               │ │  │
│  │  │  - Index, Timestamp, Nonce, Difficulty                     │ │  │
│  │  ├────────────────────────────────────────────────────────────┤ │  │
│  │  │ Hashes                                                     │ │  │
│  │  │  - Previous Hash, Current Hash, Model Hash                 │ │  │
│  │  ├────────────────────────────────────────────────────────────┤ │  │
│  │  │ Transaction Data                                           │ │  │
│  │  │  - FL Round, Client ID, Accuracy, Samples                  │ │  │
│  │  ├────────────────────────────────────────────────────────────┤ │  │
│  │  │ Mining Info                                                │ │  │
│  │  │  - Miner ID, Consensus, Difficulty                         │ │  │
│  │  ├────────────────────────────────────────────────────────────┤ │  │
│  │  │ Digital Signature                                          │ │  │
│  │  │  - Public Key, Signature, Miner                            │ │  │
│  │  └────────────────────────────────────────────────────────────┘ │  │
│  └──────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         STORAGE LAYER                                    │
│                                                                          │
│  ┌──────────────────────┐  ┌──────────────────────┐                    │
│  │  blockchain.json     │  │  blockchain_         │                    │
│  │                      │  │  detailed.log        │                    │
│  │  Complete blockchain │  │                      │                    │
│  │  data in JSON format │  │  Human-readable      │                    │
│  │                      │  │  detailed log        │                    │
│  └──────────────────────┘  └──────────────────────┘                    │
│                                                                          │
│  ┌──────────────────────┐  ┌──────────────────────┐                    │
│  │  blockchain_         │  │  blockchain_         │                    │
│  │  summary.txt         │  │  details.json        │                    │
│  │                      │  │                      │                    │
│  │  Quick overview      │  │  Programmatic        │                    │
│  │  summary             │  │  export              │                    │
│  └──────────────────────┘  └──────────────────────┘                    │
│                                                    